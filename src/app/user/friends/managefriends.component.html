<div class="container" #parentContainer>
    <div class="left-section" #leftSection>
        @if(allVisibleObjects) {
            <div class="neighbor-header">
                <h2><span [class.bounce]="objectCountBounceFlag()">üîç</span> <span [class.bounce]="objectCountBounceFlag()">{{ allVisibleObjectsCount() }}</span> Neighbors</h2>
            </div>

            @for(neighbor of allVisibleObjects; track neighbor.id; let i = $index) {
                <div #objectCards>
                    @defer (on viewport) {
                        <app-friends-neighbor-card [object]="neighbor" (click)="onListObjectClick(i)"></app-friends-neighbor-card>
                    }
                    @placeholder {
                        <div class="neighbord-card-placeholder">
                            <img src="https://wp.angular.love/wp-content/uploads/2024/04/image3.png">
                        </div>
                    }
                </div>
            }
        }
    </div>

    <div class="grabber" appResize [parentContainer]="parentContainer" [leftResize]="leftSection" [rightResize]="rightSection"></div>

    <div class="right-section" #rightSection>
        @if(markerData) {
            <app-map
                #mapRef
                [defaultCenterLocation]="defaultCenterLocation"
                [defaultZoomLevel]="defaultZoomLevel"
                [layerGroupNames]="layerGroupNames"
                [markerData]="markerData"
                [sortFunction]="sortFunction"
                [convertIdToObject]="idToObject.bind(this)"
                (visibleLayersCleared)="onVisibleLayersCleared($event)"
                (visibleLayersRefreshed)="onVisibleLayersRefreshed($event)"
                (ready)="onReady($event)"
            ></app-map>
        }
    </div>
</div>