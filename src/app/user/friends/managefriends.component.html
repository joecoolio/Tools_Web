<div class="container" #parentContainer>
    <div class="left-section" #leftSection>
        @if(allVisibleObjects) {
            <div class="neighbor-header">
                <h2><span [class.bounce]="objectCountBounceFlag()">üîç</span> <span [class.bounce]="objectCountBounceFlag()">{{ allVisibleObjectsCount() }}</span> Neighbors</h2>
            </div>

            @for(_neighbor of allVisibleObjects; track _neighbor.id; let i = $index) {
                @let neighbor = asNeighbor(_neighbor);
                <mat-card #objectCards class="person-card" (click)="onListObjectClick(i)">
                    <mat-card-content>
                        <h2 class="person-name">{{ neighbor.name }}</h2>
                        <div class="person-body">
                            <img [src]="neighbor.imageUrl" [alt]="neighbor.name" class="person-image"/>
                            <span class="neighbor-type" >
                                @if(neighbor.is_friend) {
                                    @if(neighbor.depth == 1) {
                                        <span class="friend-tag">Friend</span>
                                    }
                                    @else {
                                        <span class="friend-tag friend-of-friend-tag">Friend of Friend</span>
                                    }
                                }
                                @if(neighbor.friendship_requested) {
                                    <span class="friend-tag friend-request-tag">Requested</span>
                                }
                            </span>
                            <div class="person-info">
                                <p class="person-address">{{ neighbor.home_address }} </p>
                                @if (neighbor.tool_count > 0) {
                                    <p class="person-toolcount">Sharing {{ neighbor.tool_count }} tools!</p>
                                }
                            </div>
                        </div>
                    </mat-card-content>
                </mat-card>
            }
        }
    </div>

    <div class="grabber" appResize [parentContainer]="parentContainer" [leftResize]="leftSection" [rightResize]="rightSection"></div>

    <div class="right-section" #rightSection>
        @if(markerData) {
            <app-map
                #mapRef
                [defaultCenterLocation]="defaultCenterLocation"
                [defaultZoomLevel]="defaultZoomLevel"
                [layerGroupNames]="layerGroupNames"
                [markerData]="markerData"
                [sortFunction]="sortFunction"
                [convertIdToObject]="idToObject.bind(this)"
                (visibleLayersCleared)="onVisibleLayersCleared($event)"
                (visibleLayersRefreshed)="onVisibleLayersRefreshed($event)"
                (ready)="onReady($event)"
            ></app-map>
        }
    </div>
</div>